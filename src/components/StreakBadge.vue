<script setup lang="ts">
import { computed } from 'vue';
import { useIntakeStore } from '../stores/intake';

const intakeStore = useIntakeStore();
const streak = computed(() => intakeStore.currentStreak);

const hasTakenToday = computed(() => intakeStore.dailyCount() > 0);
</script>

<template>
  <div 
    class="flex flex-col items-center justify-center w-14 h-14 rounded-full border shadow-md transition-all bg-white"
    :class="hasTakenToday ? 'border-orange-200' : 'border-gray-200 grayscale'"
  >
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      viewBox="0 0 24 24" 
      fill="currentColor" 
      class="w-6 h-6 text-orange-500 mb-[-2px]" 
    >
      <path fill-rule="evenodd" d="M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177 7.547 7.547 0 01-1.705-1.715.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd" />
    </svg>
    
    <span class="text-xs font-bold text-gray-700">
      {{ streak }}
    </span>
  </div>
</template>